#! .desc:
# Replace a substring of a string with character(s)
#! .params:
# <"$1"> - substring
# <"$2"> - string
# <"$3"> - character(s)
# <$4> - replacement_options(
#     '-replfst' - replace the first occurrence
#     '-repllst' - replace the last occurrence
#     '-replall' - replace all occurrences
#     .
# )
# [$5] - type(
#     '-nout' - no output
#     .
# )
#! .gives:
# (0) <"$_str"> - string;
#                 modified $2
#! .rc:
# (0) modified $2
# (1) $1 = $2
# (2) ! $1
#.
replstr() {
    case "$2" in
        "$1") return 1 ;;
        *"$1"*) : ;;
        *) return 2 ;;
    esac

    case "$4" in
        '-replfst')
            _str="${2%%"$1"*}$3${2#*"$1"}"
        ;;
        '-repllst')
            _str="${2%"$1"*}$3${2##*"$1"}"
        ;;
        '-replall')
            _str_ref="${2%%"$1"*}$3"
            _str="$_str_ref${2#*"$1"}"

            while :; do case "$_str" in
                "$_str_ref"*"$1"*)
                    _str="${_str#*"$_str_ref"}"
                    _str_ref="$_str_ref${_str%%"$1"*}$3"
                    _str="$_str_ref${_str#*"$1"}"
                ;;
                *)
                    break
                ;;
            esac done
        ;;
    esac

    case "$5" in
        '-nout') : ;;
        *) printf "%s" "$_str" ;;
    esac
}
