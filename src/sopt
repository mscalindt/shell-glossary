#! .desc:
# Match `-`-delimited short/long option without an option argument
#! .params (<1+>):
# ["$1"] - -* (short)
# ["$2"] - --* (long)
#! .uses.var:
# <opt> $ - string;
#           first positional parameter
# [sopt_index] $ - string;
#                  index with encountered short options
#! .gives:
# (0) <"$opt_match"> - string;
#                      literal option matched
# (0) ["$sopt_index"] - string;
#                       [modified <$sopt_index>]
#! .sets:
# (0) <opt> $ - "-${opt#??}" | '';
# (0) <opt_arg> $ - '';
# (0) <opt_shift> $ - '1';
#! .rc:
# (0) success
# (1) no match
#! .ec:
# (255) bad input
#! .caveats:
# > `INT_MAX`.
#.
sopt() {
    # Assert the usage of the function is appropriate (else `return 1`) or
    # correct (else `exit 255`) and set the appropriate short/long option
    # variant as $1 to simplify further operations.
    case "$opt" in
        '--'*)
            [ "${#opt}" -gt 2 ] || return 1

            case "$2" in
                '--'*)
                    [ "${#2}" -gt 2 ] || exit 255

                    set -- "$2"
                ;;
                *)
                    [ ! "$2" ] || exit 255

                    case "$1" in
                        '--'*)
                            [ "${#1}" -gt 2 ] || exit 255
                        ;;
                        '-'*)
                            return 1
                        ;;
                        *)
                            exit 255
                        ;;
                    esac
                ;;
            esac
        ;;
        '-'*)
            [ "${#opt}" -gt 1 ] || return 1

            case "$1" in
                '--'*)
                    return 1
                ;;
                '-'*)
                    [ "${#1}" = 2 ] || exit 255
                ;;
                *)
                    exit 255
                ;;
            esac
        ;;
        *)
            return 1
        ;;
    esac

    # Try to match a long option without an argument.
    case "$1" in
        '--'*)
            case "$opt" in
                "$1")
                    opt_arg=
                    opt_match="$1"
                    opt_shift=1
                    opt=

                    return 0
                ;;
            esac

            return 1
        ;;
    esac

    # Try to match a short option without an argument.
    case "$1" in
        '-'*)
            case "$opt" in
                "$1"*)
                    if [ "$sopt_index" ]; then
                        sopt_index="$sopt_index${1#?}"
                    else
                        sopt_index="${1#?}"
                    fi

                    opt_arg=
                    opt_match="$1"
                    opt_shift=1
                    opt="-${opt#??}"

                    return 0
                ;;
            esac
        ;;
    esac

    return 1
}
